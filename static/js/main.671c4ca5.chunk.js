(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{242:function(e,n){},244:function(e,n){},255:function(e,n){},257:function(e,n){},284:function(e,n){},286:function(e,n){},287:function(e,n){},292:function(e,n){},294:function(e,n){},313:function(e,n){},325:function(e,n){},328:function(e,n){},332:function(e,n,t){"use strict";t.r(n);var r=t(0),i=t.n(r),c=t(63),a=t.n(c),o=t(3),s=t(49),l=t(6),u=t(84),d=t(185),j=new u.b(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_MAGIC_PUBLISHABLE_KEY,{extensions:[new d.a]}),b=Object(r.createContext)(null),p=t(1),x=function(){return Object(p.jsx)("div",{style:{textAlign:"center"},children:Object(p.jsx)("img",{src:"./spinner.svg",height:"50px",alt:"Loading"})})},f=function(){var e=Object(r.useContext)(b),n=Object(o.a)(e,1)[0],t=Object(l.f)();return Object(r.useEffect)((function(){n&&!n.loading&&!n.issuer&&t.push("/login")}),[n,t]),Object(p.jsx)(p.Fragment,{children:(null===n||void 0===n?void 0:n.loading)?Object(p.jsx)(x,{}):(null===n||void 0===n?void 0:n.issuer)&&Object(p.jsx)("div",{children:"You're logged in!"})})},h=t(18),O=t.n(h),g=t(37),m=t(178),v=t(15),S=t(66),E=t(179),w=function(e){var n=e.onEmailSubmit,t=e.disabled,i=Object(r.useState)(""),c=Object(o.a)(i,2),a=c[0],s=c[1],l=function(){var e=Object(g.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n(a);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("form",{onSubmit:l,children:[Object(p.jsx)("h3",{className:"form-header",children:"Login"}),Object(p.jsx)("div",{className:"input-wrapper",children:Object(p.jsx)(m.a,{placeholder:"Enter your email",size:"sm",value:a,onChange:function(e){return s(e.target.value)},prefix:Object(p.jsx)(v.a,{type:S.a.Envelope,size:23,color:"#000"})})}),Object(p.jsx)("div",{children:Object(p.jsx)(E.a,{leadingIcon:S.a.PaperPlane,color:"primary",size:"sm",disabled:t,onClick:l,children:"Send Magic Link"})})]}),Object(p.jsx)("style",{children:"\n        form,\n        label {\n          display: flex;\n          flex-flow: column;\n          text-align: center;\n        }\n        .form-header {\n          font-size: 22px;\n          margin: 25px 0;\n        }\n        .input-wrapper {\n          width: 80%;\n          margin: 0 auto 20px;\n        }\n      "})]})},_=function(e){var n=e.onSubmit,t=Object(r.useState)(!1),i=Object(o.a)(t,2),c=i[0],a=i[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"or-login-with",children:"Or login with"}),["apple","google","facebook","github"].map((function(e){return Object(p.jsx)("div",{children:Object(p.jsx)("button",{type:"submit",className:"social-btn",onClick:function(){a(!0),n(e)},style:{backgroundImage:"url(".concat(e,".png)")},children:e.replace(/^\w/,(function(e){return e.toUpperCase()}))},e)},e)})),c&&Object(p.jsx)("div",{className:"redirecting",children:"Redirecting..."}),Object(p.jsx)("style",{children:"\n        .or-login-with {\n          margin: 25px 0;\n          font-size: 12px;\n          text-align: center;\n          color: gray;\n        }\n        .social-btn {\n          cursor: pointer;\n          border-radius: 50px;\n          margin-bottom: 20px;\n          border: 1px solid #8a8a8a;\n          padding: 9px 24px 9px 35px;\n          width: 80%;\n\n          background-color: #fff;\n          background-size: 20px;\n          background-repeat: no-repeat;\n          background-position: 23% 50%;\n        }\n        .redirecting {\n          color: gray;\n          font-size: 12px;\n          margin-bottom: 5px;\n        }\n      "})]})},y=function(){var e=Object(l.f)(),n=Object(r.useState)(!1),t=Object(o.a)(n,2),i=t[0],c=t[1],a=Object(r.useContext)(b),s=Object(o.a)(a,2),u=s[0],d=s[1];function x(){return(x=Object(g.a)(O.a.mark((function n(t){var r,i;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c(!0),n.next=4,j.auth.loginWithMagicLink({email:t,redirectURI:new URL("/callback",window.location.origin).href});case 4:return r=n.sent,n.next=7,fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL,"/api/login"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+r}});case 7:if(200!==n.sent.status){n.next=15;break}return n.next=11,j.user.getMetadata();case 11:return i=n.sent,n.next=14,d(i);case 14:e.push("/profile");case 15:n.next=21;break;case 17:n.prev=17,n.t0=n.catch(0),c(!1),console.log(n.t0);case 21:case"end":return n.stop()}}),n,null,[[0,17]])})))).apply(this,arguments)}function f(){return(f=Object(g.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.oauth.loginWithRedirect({provider:n,redirectURI:new URL("/callback",window.location.origin).href});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){u&&u.issuer&&e.push("/profile")}),[u,e]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"login",children:[Object(p.jsx)(w,{disabled:i,onEmailSubmit:function(e){return x.apply(this,arguments)}}),Object(p.jsx)(_,{onSubmit:function(e){return f.apply(this,arguments)}})]}),Object(p.jsx)("style",{children:"\n        .login {\n          max-width: 20rem;\n          margin: 40px auto 0;\n          padding: 1rem;\n          border: 1px solid #dfe1e5;\n          border-radius: 4px;\n          text-align: center;\n          box-shadow: 0px 0px 6px 6px #f7f7f7;\n          box-sizing: border-box;\n        }\n      "})]})},R=function(){var e=Object(l.f)(),n=Object(r.useContext)(b),t=Object(o.a)(n,1)[0];return Object(r.useEffect)((function(){t&&!t.loading&&!t.issuer&&e.push("/login")}),[t,e]),Object(p.jsxs)(p.Fragment,{children:[(null===t||void 0===t?void 0:t.loading)?Object(p.jsx)(x,{}):(null===t||void 0===t?void 0:t.issuer)&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"label",children:"Email"}),Object(p.jsx)("div",{className:"profile-info",children:t.email}),Object(p.jsx)("div",{className:"label",children:"User Id"}),Object(p.jsx)("div",{className:"profile-info",children:t.issuer})]}),Object(p.jsx)("style",{children:"\n        .label {\n          font-size: 12px;\n          color: #6851ff;\n          margin: 30px 0 5px;\n        }\n        .profile-info {\n          font-size: 17px;\n          word-wrap: break-word;\n        }\n      "})]})},C=function(e){var n=Object(l.f)(),t=Object(r.useContext)(b),i=Object(o.a)(t,2),c=(i[0],i[1]);Object(r.useEffect)((function(){new URLSearchParams(e.location.search).get("provider")?a():s()}),[e.location.search]);var a=function(){var e=Object(g.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.oauth.getRedirectResult();case 2:n=e.sent,u(n.magic.idToken);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){new URLSearchParams(e.location.search).get("magic_credential")&&j.auth.loginWithCredential().then((function(e){return u(e)}))},u=function(){var e=Object(g.a)(O.a.mark((function e(t){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL,"/api/login"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}});case 2:if(200!==e.sent.status){e.next=10;break}return e.next=6,j.user.getMetadata();case 6:return r=e.sent,e.next=9,c(r);case 9:n.push("/profile");case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(p.jsx)(x,{})},T=t(180),P=function(){var e=Object(l.f)(),n=Object(r.useContext)(b),t=Object(o.a)(n,2),i=t[0],c=t[1];return Object(p.jsxs)("header",{children:[Object(p.jsx)("nav",{children:Object(p.jsx)("ul",{children:(null===i||void 0===i?void 0:i.loading)?Object(p.jsx)("div",{style:{height:"38px"}}):(null===i||void 0===i?void 0:i.issuer)?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("li",{children:Object(p.jsx)(T.a,{color:"primary",size:"sm",onPress:function(){return e.push("/")},children:"Home"})}),Object(p.jsx)("li",{children:Object(p.jsx)(T.a,{color:"primary",size:"sm",onPress:function(){return e.push("/profile")},children:"Profile"})}),Object(p.jsx)("li",{children:Object(p.jsx)(T.a,{color:"warning",size:"sm",onPress:function(){j.user.logout().then((function(){c({user:null}),e.push("/login")}))},children:"Logout"})})]}):Object(p.jsx)("li",{children:Object(p.jsx)(E.a,{color:"primary",size:"sm",onPress:function(){return e.push("/login")},children:"Login"})})})}),Object(p.jsx)("style",{children:"\n        nav {\n          max-width: 45rem;\n          margin: 0 auto 50px;\n          padding: 1.25rem 1.25rem;\n          border-bottom: 1px solid #f0f0f0;\n        }\n        ul {\n          display: flex;\n          list-style: none;\n        }\n        li {\n          margin-right: 1.5rem;\n          line-height: 38px;\n        }\n        li:first-child {\n          margin-left: auto;\n        }\n      "})]})},k=function(e){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(P,{}),Object(p.jsx)("main",{children:Object(p.jsx)("div",{className:"container",children:e.children})}),Object(p.jsx)("style",{children:"\n      * {\n        font-family: sans-serif !important;\n        outline: none;\n      }\n      .container {\n        max-width: 42rem;\n        margin: 0 auto;\n        padding: 0 10px;\n      }\n    "})]})};var L=function(){var e=Object(r.useState)(),n=Object(o.a)(e,2),t=n[0],i=n[1];return Object(r.useEffect)((function(){i({loading:!0}),j.user.isLoggedIn().then((function(e){return e?j.user.getMetadata().then((function(e){return i(e)})):i({user:null})}))}),[]),Object(p.jsx)(s.a,{children:Object(p.jsx)(l.c,{children:Object(p.jsx)(b.Provider,{value:[t,i],children:Object(p.jsxs)(k,{children:[Object(p.jsx)(l.a,{path:"/",exact:!0,component:f}),Object(p.jsx)(l.a,{path:"/login",component:y}),Object(p.jsx)(l.a,{path:"/profile",component:R}),Object(p.jsx)(l.a,{path:"/callback",component:C})]})})})})},A=(t(331),t(62));a.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(A.a,{root:!0,children:Object(p.jsx)(L,{})})}),document.getElementById("root"))}},[[332,1,2]]]);
//# sourceMappingURL=main.671c4ca5.chunk.js.map